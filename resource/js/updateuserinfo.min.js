$(function(){$.formValidator.initConfig({formID:"formMain",submitOnce:!0,onSuccess:function(){return checkEmail()?!0:!1}});$("#RealName,#NickName,#Birthday,#Age,#Mobile,#Phone,#Email,#Signature,#CompanyName,#CompanyFax,#CompanyAddress,#CompanyIntro").focus(function(){$(this).css({background:"#EFF7FF",borderColor:"#4C9AC9"})}).blur(function(){$(this).css({background:"",borderColor:""})});$("#EmailTip").html("\u90ae\u7bb1\u683c\u5f0f\uff1aexample@gitom.com");$("#RealName").formValidator({onShow:"\u771f\u5b9e\u59d3\u540d",
onFocus:"\u771f\u5b9e\u59d3\u540d\u957f\u5ea62-20",onCorrect:"\u6b63\u786e"}).inputValidator({min:2,max:40,onError:"\u771f\u5b9e\u59d3\u540d\u957f\u5ea6\u4e0d\u6b63\u786e"}).regexValidator({regExp:"^[a-zA-Z\u4e00-\u9fa5]+$",onError:"\u771f\u5b9e\u59d3\u540d\u53ea\u80fd\u662f\u4e2d\u6587\u3001\u5b57\u6bcd"});$("#NickName").formValidator({empty:!0,onShow:"\u9009\u586b",onFocus:"\u6635\u79f0\u53ef\u7a7a",onCorrect:"\u6b63\u786e"}).inputValidator({min:0,max:40,onError:"\u6635\u79f0\u957f\u5ea6\u4e0d\u6b63\u786e"});
$("#Birthday").formValidator({onShow:"\u51fa\u751f\u65e5\u671f",onFocus:"\u8bf7\u8f93\u5165\u60a8\u7684\u51fa\u751f\u65e5\u671f\uff0c\u6ce8\u610f\u683c\u5f0f\u54e6",onCorrect:"\u6b63\u786e"}).inputValidator({min:"1900-01-01",max:new Date,type:"date",onError:"\u65e5\u671f\u5fc5\u987b\u57281900-01-01\u548c\u5f53\u524d\u65e5\u671f\u4e4b\u95f4"});$("#Age").formValidator({onShow:"\u5e74\u9f84\uff081-130\u5c81\u4e4b\u95f4\uff09",onFocus:"\u53ea\u80fd\u8f93\u51651-130\u4e4b\u95f4\u7684\u6570\u5b57\u54e6",
onCorrect:"\u6b63\u786e"}).inputValidator({min:1,max:130,type:"value",onErrorMin:"\u5e74\u9f84\u503c\u5fc5\u987b\u5927\u4e8e\u7b49\u4e8e1",onError:"\u5e74\u9f84\u5fc5\u987b\u57281-130\u4e4b\u95f4"});$("#Mobile").formValidator({onShow:"\u624b\u673a\u53f7\u7801",onFocus:"\u624b\u673a\u53f7\u7801\u957f\u5ea611\u4f4d",onCorrect:"\u6b63\u786e"}).regexValidator({regExp:["mobile"],dataType:"enum",onError:"\u624b\u673a\u53f7\u7801\u683c\u5f0f\u4e0d\u6b63\u786e"});$("#Phone").formValidator({empty:!0,onShow:"\u9009\u586b",
onFocus:"\u56fd\u5185\u533a\u53f7,\u56fd\u9645\u533a\u53f7,\u5206\u673a\u53f7,400\u53f7\u7801",onCorrect:"\u6b63\u786e"}).regexValidator({regExp:["tel2"],dataType:"enum",onError:"\u56fa\u5b9a\u7535\u8bdd\u53f7\u7801\u683c\u5f0f\u4e0d\u6b63\u786e"});$("#Signature").formValidator({empty:!0,onShow:"\u9009\u586b",onFocus:"\u7a81\u51fa\u60a8\u81ea\u5df1\u4e2a\u6027\u7684\u8bed\u53e5\uff01",onCorrect:"\u6b63\u786e"}).inputValidator({min:0,max:500,onError:"\u4e2a\u6027\u7b7e\u540d\u5185\u5bb9\u592a\u591a\u4e86\uff0c\u6700\u591a250\u5b57"});
$("#Email").blur(function(){checkEmail()});$("#Email").focus(function(){focusTips("Email","\u90ae\u7bb1\u683c\u5f0f\uff1aexample@gitom.com")});showAreaName();showAreaLi();$("#CompanyName").formValidator({empty:!0,onShow:"\u9009\u586b",onFocus:"\u8bf7\u8f93\u5165\u8d35\u516c\u53f8\u540d\u79f0",onCorrect:"\u6b63\u786e"}).inputValidator({min:0,max:100,onError:"\u516c\u53f8\u540d\u79f0\u592a\u957f\u4e86\uff0c\u6700\u591a100\u4e2a\u5b57"}).regexValidator({regExp:"^[a-zA-Z0-9_\u4e00-\u9fa5]+$",onError:"\u53ea\u80fd\u662f\u4e2d\u6587\u3001\u5b57\u6bcd\u3001\u6570\u5b57\u3001\u4e0b\u5212\u7ebf"});
$("#CompanyPhone").formValidator({empty:!0,onShow:"\u9009\u586b",onFocus:"\u624b\u673a\u6216\u56fa\u8bdd(086-0595-85698882)",onCorrect:"\u6b63\u786e",onEmpty:"\u60a8\u771f\u7684\u4e0d\u60f3\u7559\u516c\u53f8\u7535\u8bdd\u5417\uff1f"}).regexValidator({regExp:["mobile","tel2"],dataType:"enum",onError:"\u516c\u53f8\u7535\u8bdd\u683c\u5f0f\u4e0d\u6b63\u786e"});$("#CompanyFax").formValidator({empty:!0,onShow:"\u9009\u586b",onFocus:"\u4f8b\u5982:086-0577-88888888",onCorrect:"\u6b63\u786e",onEmpty:"\u60a8\u771f\u7684\u4e0d\u60f3\u7559\u4f20\u771f\u4e86\u5417\uff1f"}).regexValidator({regExp:["tel2"],
dataType:"enum",onError:"\u60a8\u8f93\u5165\u7684\u4f20\u771f\u683c\u5f0f\u4e0d\u6b63\u786e"});$("#CompanyAddress").formValidator({empty:!0,onShow:"\u9009\u586b",onFocus:"\u8bf7\u8f93\u5165\u8d35\u516c\u53f8\u8be6\u7ec6\u5730\u5740\uff0c\u6700\u591a150\u5b57",onCorrect:"\u6b63\u786e"}).inputValidator({min:0,max:300,onError:"\u516c\u53f8\u8be6\u7ec6\u5730\u5740\u592a\u957f\u4e86\uff0c\u6700\u591a150\u5b57"});$("#CompanyIntro").formValidator({empty:!0,onShow:"\u9009\u586b",onFocus:"\u8bf7\u8f93\u5165\u8d35\u516c\u53f8\u4ecb\u7ecd\uff0c\u6700\u591a1500\u5b57",
onCorrect:"\u6b63\u786e"}).inputValidator({min:0,max:3E3,onError:"\u516c\u53f8\u4ecb\u7ecd\u957f\u5ea6\u4e0d\u6b63\u786e\uff0c\u6700\u591a1500\u5b57"})});
function checkEmail(){var b=!1;if(""==$.trim($("#Email").val()))blurTips("Email","\u90ae\u7bb1\u683c\u5f0f\uff1aexample@gitom.com","");else{var a=$.trim($("#Email").val());/^[a-zA-Z0-9_\-]{1,}@[a-zA-Z0-9_\-]{1,}\.[a-zA-Z0-9_\-.]{1,}$/.test(a)?($("#EmailTip").removeClass().addClass("onLoad").html("\u7b49\u5f85\u670d\u52a1\u5668\u9a8c\u8bc1\uff01"),$.ajax({type:"post",url:"/User/CheckEmail",data:"email="+$.trim($("#Email").val()),async:!1,success:function(a){a?(blurTips("Email","","\u6b63\u786e"),b=
!0):blurTips("Email","\u60a8\u6240\u586b\u5199\u7684\u90ae\u7bb1\u5df2\u88ab\u6ce8\u518c!","")}})):blurTips("Email","\u90ae\u7bb1\u683c\u5f0f\u4e0d\u6b63\u786e\uff01","")}return b}function blurTips(b,a,c){""==a&&$("#"+b+"Tip").removeClass().addClass("onCorrect").html(c);""==c&&$("#"+b+"Tip").removeClass().addClass("onError").html(a)}function focusTips(b,a){$("#"+b+"Tip").removeClass().addClass("onFocus").html(a)}
function showAreaName(){""!=$("#provinceName").val()&&$("#a_province").text($("#provinceName").val());""!=$("#cityName").val()&&$("#a_city").text($("#cityName").val());""!=$("#countyName").val()&&$("#a_county").text($("#countyName").val());""!=$("#townName").val()&&$("#a_town").text($("#townName").val())}
function showAreaLi(){""==$("#townName").val()&&$("#li_town").hide();""==$("#countyName").val()&&($("#li_county").hide(),$("#li_town").hide());""==$("#cityName").val()&&($("#li_city").hide(),$("#li_county").hide(),$("#li_town").hide())}
function OpenDiv(b){$("#div_address").html('<li><img src="/template/default/images/formVaidator/onLoad.gif" alt="\u6570\u636e\u52a0\u8f7d\u4e2d..."  title="\u7528\u6237\u6570\u636e\u52a0\u8f7d\u4e2d..." width="30" height="30"></li>');var a=$("img[alt='"+b+"']").parent().prev().find("img");if(0<a.length){preHiddenCode=a.attr("alt");a=$("#"+preHiddenCode+"").val();if(""==a){alert("\u8bf7\u5148\u9009\u62e9\u4e0a\u7ea7\u5730\u533a\uff01");CloseDiv();return}getAreaListByParentCode(a,b)}else getProvinceList(b);
b=$("#a_"+b).parent()[0].offsetLeft;document.getElementById("div_address").style.marginLeft=b+"px";$("#div_address").removeClass("disvisible");$("#div_address").addClass("visible")}function CloseDiv(){$("#div_address").removeClass("visible");$("#div_address").addClass("disvisible")}function getAreaListByParentCode(b,a){$.ajax({type:"post",datatype:"json",url:"/User/LoadArea?code="+b,success:function(b){0<b.length&&insertDataToDiv(b,a)}})}
function getProvinceList(b){$.ajax({type:"post",datatype:"json",url:"/User/GetProvinceList",success:function(a){0<a.length&&insertDataToDiv(a,b)}})}
function insertDataToDiv(b,a){var c;c='<a class="close_button" onclick="CloseDiv(\'\')">\u5173\u95ed</a><ul class="address_pro">';for(var d="",e=0;e<b.length;e++)d="<li>",d+="<a onmouseover=\"this.className='ad_box_ov'\" onmouseout=\"this.className='ad_box_ou'\"",d+='href="javascript:void(0);" onclick="addCode(\''+b[e].Code+"','"+b[e].Name+"','"+a+"')\">",d+=""+b[e].Name+"</a></li>",c+=d;c+="</ul>";$("#div_address").html(c)}
function addCode(b,a,c){ClearData(c);$("#"+c).val(b);$("#a_"+c).text(a);CloseDiv();checkShowSelect(b,c)}function checkShowSelect(b,a){"town"!=a&&$.ajax({type:"post",datatype:"json",url:"/User/LoadArea?code="+b,success:function(b){var d=$("#li_city"),e=$("#li_county"),f=$("#li_town");0==b.length?("province"==a&&(d.hide(),e.hide(),f.hide()),"city"==a&&(e.hide(),f.hide()),"county"==a&&f.hide()):(d.show(),e.show(),f.show(),"province"==a?d.click():"city"==a?e.click():"county"==a&&f.click())}})}
function ClearData(b){for(var a=[],a=$("#"+b).nextAll("input"),c=0;c<a.length;c++)$(a[c]).val("");a=[];a=$("#a_"+b).parent().nextAll().find("a");for(c=0;c<a.length;c++)$(a[c]).text("\u8bf7\u9009\u62e9")};
